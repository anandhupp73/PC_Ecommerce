{% extends "index.html" %}
{% block title %}Cart{% endblock %}
{% load static %}

{% block content %}

<style>

.cart-container {
    padding: 40px;
    display: flex;
    gap: 30px;
}

/* Left: Product list */
.cart-items {
    flex: 2;
}

/* Right: Order summary */
.cart-order-summary {
    flex: 1;
    background: #11141A;
    padding: 25px;
    border-radius: 12px;
    border: 1px solid #1f242c;
    height: fit-content;
}

.cart-title {
    font-size: 40px;
    font-weight: 700;
    color: #00C8FF;
}

.cart-sub {
    margin-bottom: 20px;
    color: #8A8F98;
}

/* Product Card */
.cart-card {
    background: #11141A;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #1f242c;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 20px;
}
.cart-card:hover{
    border: 1px solid #092b39;
}
.cart-img {
    width: 120px;
    height: 120px;
    border-radius: 10px;
    object-fit: cover;
}

/* Product details */
.cart-info {
    flex: 2;
}

.cart-category {
    color: #4bb7ff;
    font-size: 15px;
}

.cart-product-name {
    font-size: 20px;
    font-weight: 600;
    color:white;
    margin-bottom:10px;
}

/* Quantity box */
.cart-qty-box {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1A1F25;
    padding: 8px 16px;
    border-radius: 8px;
    gap: 15px;
}

.cart-qty-btn {
    background: none;
    color:white;
    font-size: 22px;
    padding: 5px;
    border: none;
    cursor: pointer;
    text-decoration: none;
    border-radius: 6px;
}
.cart-qty-btn:hover{
    background-color: #104052;
}

.cart-qty-number {
    font-size: 18px;
    color:white;
}

/* Price */
.cart-price {
    font-size: 26px;
    color: #00C8FF;
    font-weight: 700;
    flex: 1;
    text-align: right;
}

/* Delete button */
.cart-delete-btn {
    color: #ff4d4d;
    font-size: 20px;
    cursor: pointer;
    border: none;
    background: none;
}

/* Order Summary */
.cart-summary-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 20px;
    color:white;
}

.cart-summary-line {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    color: #ccc;
}

.cart-summary-total {
    font-size: 26px;
    font-weight: 700;
    color: #00C8FF;
    margin-top: 15px;
}

/* Buttons */
.cart-checkout-btn {
    background: #00C8FF;
    color: #000;
    width: 100%;
    padding: 12px;
    margin-top: 20px;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
    font-weight: 600;
}

.cart-continue-btn {
    margin-top: 12px;
    width: 100%;
    padding: 12px;
    background: #1A1F25;
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
    font-size: 18px;
}
</style>

<div class="cart-container">

    <!-- LEFT SIDE (items) -->
    <div class="cart-items">
        <div class="cart-title">Shopping <span style="color:#00C8FF">Cart</span></div>
        <div class="cart-sub">{{ cart_items.count }} items in your cart</div>

        {% for item in cart_items %}
        <div class="cart-card">

            <a href="{% url 'product_detail' item.product.id %}">
            <img class="cart-img" src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
            </a>

            <div class="cart-cart-info">
                <div class="cart-category">{{ item.product.category.name }}</div>
                <div class="cart-product-name">{{ item.product.name }}</div>

                <div class="cart-qty-box">
                    <a href="{% url 'update_cart' item.id 'decrease' %}" class="cart-qty-btn">−</a>
                    <div class="cart-qty-number">{{ item.quantity }}</div>
                    <a href="{% url 'update_cart' item.id 'increase' %}" class="cart-qty-btn">+</a>
                </div>
            </div>

            <div class="cart-price">
                ₹{{ item.total_price }}
            </div>

            <a href="{% url 'remove_cart_item' item.id %}" class="delete-btn"><i class="fa-solid fa-trash"></i></a>
        </div>
        {% endfor %}
    </div>

    <!-- RIGHT SIDE (summary) -->
    <div class="cart-order-summary">
        <div class="cart-summary-title">Order Summary</div>

        <div class="cart-summary-line">
            <span>Subtotal ({{ cart_items.count }} items)</span>
            <span>₹{{ subtotal }}</span>
        </div>
        <div class="cart-summary-line">
            <span>Shipping</span>
            <span>₹{{ shipping }}</span>
        </div>
        <div class="cart-summary-line">
            <span>Estimated Tax</span>
            <span>₹{{ estimated_tax }}</span>
        </div>

        <div class="cart-summary-total">Total ₹{{ total }}</div>

        <form method="GET" action="{% url 'checkout_cart' %}">
            <button class="cart-checkout-btn">Proceed to Checkout</button>
        </form>
        <a href="{% url 'home' %}" style="text-decoration : none ;">
        <button class="cart-continue-btn">Continue Shopping</button>
        </a>
    </div>

</div>

{% endblock %}
